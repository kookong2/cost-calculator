<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>계산기</title>
<style>
* {
    box-sizing: border-box;
}
body {
    font-family: Arial, sans-serif;
    background: #f4f6f9;
    margin: 0;
    padding: 15px;
}
.container {
    max-width: 480px;
    margin: auto;
    background: white;
    padding: 20px;
    border-radius: 14px;
    box-shadow: 0 5px 20px rgba(0,0,0,0.1);
}
h2 {
    text-align: center;
    margin-bottom: 15px;
}
.mode-group, .type-group {
    display: flex;
    gap: 10px;
    margin-bottom: 15px;
}
button {
    flex: 1;
    padding: 12px;
    border-radius: 10px;
    border: none;
    font-weight: bold;
    cursor: pointer;
}
.mode-btn {
    background: #ddd;
}
.mode-btn.active {
    background: #2d6cdf;
    color: white;
}
.type-btn {
    background: #eee;
}
.type-btn.active {
    background: #1b4db5;
    color: white;
}
input {
    width: 100%;
    padding: 12px;
    margin-bottom: 12px;
    border-radius: 10px;
    border: 1px solid #ccc;
    font-size: 16px;
}
.calculate {
    background: #28a745;
    color: white;
}
.result {
    margin-top: 15px;
    padding: 15px;
    background: #f0f4ff;
    border-radius: 10px;
    text-align: center;
    font-size: 20px;
    font-weight: bold;
    cursor: pointer;
}
.hidden {
    display: none;
}
.note {
    font-size: 12px;
    text-align: center;
    color: green;
}
</style>
</head>
<body>

<div class="container">
<h2>계산기</h2>

<div class="mode-group">
    <button class="mode-btn" onclick="switchMode('cost')" id="costMode">원가 계산기</button>
    <button class="mode-btn active" onclick="switchMode('final')" id="finalMode">최종 금액 계산기</button>
</div>

<div class="type-group">
    <button class="type-btn active" onclick="selectType('progress')" id="progressBtn">진행계</button>
    <button class="type-btn" onclick="selectType('stone')" id="stoneBtn">돌계</button>
</div>



<!-- 원가 계산기 -->
<div id="costSection" class="hidden">
    <input type="number" id="finalAmount" placeholder="최종 금액 입력">
</div>

<!-- 최종 금액 계산기 (기본 표시) -->
<div id="finalSection">
    <input type="number" id="accountCost" placeholder="계정 원가 입력">
    <input type="number" id="insuranceCost" placeholder="보험비 (없으면 0)">
    <input type="number" id="phoneCost" value="15" placeholder="일회용 번호 (기본 15)">
    <input type="number" id="serviceCost" value="16" placeholder="서비스료 (기본 16)">
</div>

<input type="number" id="exchange" value="213" placeholder="환율">

<button class="calculate" onclick="calculate()">계산하기</button>

<div class="result" id="result" onclick="copyResult()">결과:</div>
<div class="note" id="copiedText"></div>

</div>

<script>
let mode = "final";  // 기본은 최종 금액 계산기
let type = "progress";

function switchMode(selected) {
    mode = selected;
    document.getElementById("costMode").classList.remove("active");
    document.getElementById("finalMode").classList.remove("active");

    if (selected === "cost") {
        document.getElementById("costMode").classList.add("active");
        document.getElementById("costSection").classList.remove("hidden");
        document.getElementById("finalSection").classList.add("hidden");
    } else {
        document.getElementById("finalMode").classList.add("active");
        document.getElementById("finalSection").classList.remove("hidden");
        document.getElementById("costSection").classList.add("hidden");
    }
}

function selectType(selected) {
    type = selected;
    document.getElementById("progressBtn").classList.remove("active");
    document.getElementById("stoneBtn").classList.remove("active");

    if (selected === "progress") {
        document.getElementById("progressBtn").classList.add("active");
    } else {
        document.getElementById("stoneBtn").classList.add("active");
    }
}

function calculate() {
    const exchange = parseFloat(document.getElementById("exchange").value);
    if (isNaN(exchange)) return;

    let result;

    if (mode === "cost") {
        const finalAmount = parseFloat(document.getElementById("finalAmount").value);
        if (isNaN(finalAmount)) return;

        result = type === "progress"
            ? (finalAmount - 12000) / 1.1 / exchange
            : (finalAmount - 4000) / 1.1 / exchange;

    } else {
        const accountCost = parseFloat(document.getElementById("accountCost").value);
        const phoneCost = parseFloat(document.getElementById("phoneCost").value) || 0;
        const serviceCost = parseFloat(document.getElementById("serviceCost").value) || 0;
        const insuranceCost = parseFloat(document.getElementById("insuranceCost").value) || 0;

        if (isNaN(accountCost)) return;

        result = type === "progress"
            ? (accountCost + phoneCost + serviceCost + insuranceCost) * exchange * 1.1 + 12000
            : accountCost * exchange * 1.1 + 4000;
    }

    result = Math.floor(result);
    document.getElementById("result").innerText = "결과: " + result.toLocaleString();
    document.getElementById("copiedText").innerText = "";
}

function copyResult() {
    const text = document.getElementById("result").innerText.replace("결과: ", "");
    if (!text) return;

    navigator.clipboard.writeText(text);
    document.getElementById("copiedText").innerText = "복사되었습니다!";
}

document.addEventListener("keydown", function(event) {
    if (event.key === "Enter") calculate();
});
</script>

</body>
</html>
